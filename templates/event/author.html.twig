{% extends 'base.html.twig' %}

{% block title %}Vos évènements{% endblock %}

{% block body %}
    <main class="flex-1 py-10 px-5 sm:px-10">
        <section>
            <h1 class="text-lg font-medium text-black">Vos <span class="font-bold text-blue-600">évènements</span></h1>
            <a class="flex flex-col items-center mt-9 w-full" href="{{ path('app_event_new')}}">
                <div class="relative flex w-full bg-blue-600 flex-row p-3 items-center justify-center rounded-lg overflow-hidden border cursor-pointer transition hover:bg-blue-700 text-white">
                    <span class="font-bold mr-2">
                        <svg class="h-6 w-6" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><title>plus-circle</title><path d="M17,13H13V17H11V13H7V11H11V7H13V11H17M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12A10,10 0 0,0 12,2Z"/></svg>
                    </span>
                    <span class="capitalize font-medium text-md">Créer un nouvel évènement</span>
                </div>
            </a>
        </section>
        <section class="mt-4">
            {% if events is empty %}
                <h2>Vous n'avez aucun évènement d'ouvert.</h2>
            {% else %}
                {% for event in events %}
                    <article class="mt-9 bg-gray-100 p-4 rounded-lg">
                        {% if event.isInFuture() %}
                            <span class="py-1.5 px-2.5 bg-green-500/30 rounded-full flex w-20 justify-center items-center gap-1">
                                <p class="font-medium text-xs text-green-600">Ouvert</p>
                            </span>
                        {% elseif event.isFinished() %}
                            <span class="py-1.5 px-2.5 bg-red-500/30 rounded-full flex w-20 justify-center items-center gap-1">
                                <p class="font-medium text-xs text-red-600">Fermé</p>
                            </span>
                        {% elseif event.isOngoing() %}
                            <span class="py-1.5 px-2.5 bg-orange-500/30 rounded-full flex w-20 justify-center items-center gap-1">
                                <p class="font-medium text-xs text-orange-600">En cours</p>
                            </span>
                        {% endif %}

                        <h3 class="text-center text-md font-bold my-4">{{event.title}}</h3>
                        <p class="text-center">{{event.description}}</p>
                        <p class="text-center">Du {{ event.startAt|format_datetime('short', 'none', locale: 'fr') }} au {{ event.endAt|format_datetime('short', 'none', locale: 'fr') }}</p>
                        <p class="text-center">{{event.location}}</p>

                        <p class="text-center">Il y a : <span class="font-semibold">{{ event.participants|length }}</span> participants</p>

                        <div class="flex items-center justify-center gap-4">
                            <div class="flex items-center justify-center">
                                <a href="{{ path('single_event', { id : event.id }) }}">
                                    <button type="submit" class="relative mt-5 bg-blue-700 flex-row p-2 items-center justify-center rounded-md text-sm overflow-hidden border cursor-pointer transition text-white hover:opacity-90 hover:scale-105 w-fit">
                                        {{ button_label|default('Voir mon évènement') }}
                                    </button>
                                </a>
                            </div>
                            <div class="flex items-center justify-center">
                                <a href="{{ path('app_event_edit', { id : event.id }) }}">
                                    <button type="submit" class="relative mt-5 bg-blue-700 flex-row p-2 items-center justify-center rounded-md text-sm overflow-hidden border cursor-pointer transition text-white hover:opacity-90 hover:scale-105 w-fit">
                                        {{ button_label|default('Modifier mon évènement') }}
                                    </button>
                                </a>
                            </div>
                        </div>
                        
                        {{ include('event/_delete_form.html.twig') }}
                    </article>
                {% endfor %}
            {% endif %}
        </section>
    </main>
{% endblock %}