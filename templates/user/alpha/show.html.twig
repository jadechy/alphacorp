{% extends 'base.html.twig' %}

{% block title %}Profil Alpha :
	{{user.username}}
{% endblock %}

{% block body %}
	<div>
		<pre>
    {{ dump(user) }}
</pre>
		<!-- Section Profil -->
		<section class="flex gap-6">
			<img src={{ asset('img/1.png') }} class="w-80 object-cover rounded-sm" alt="Profile Picture"/>
			<div class="flex justify-between w-full">
				<div class="flex flex-col justify-between">
					<div>
						<p class="font-bold">{{user.username}}</p>
						<p class="text-neutral-400">{{user.email}}</p>
						<p class="text-neutral-400">21/09/2003</p>
					</div>
					<section>
						{% if app.user and 'ROLE_ALPHA' in app.user.roles %}
							{% if bromance_exists %}
								<div class="flex items-center justify-center mt-4">
									<form action="{{ path('app_bromance_delete', {'id': user.id}) }}" method="POST">
										<button type="submit" class="btn">
											Supprimer la bromance
										</button>
									</form>
								</div>
							{% else %}
								<div class="flex items-center justify-center mt-4">
									<form action="{{ path('app_bromance_request', {'user_id': user.id}) }}" method="POST">
										<button type="submit" class="btn">Demande de bromance</button>
									</form>
								</div>
							{% endif %}
						{% endif %}
					</section>

				</div>
				<div class="rounded-full bg-fuchsia-500 h-fit px-3 py-1">
					<p>{{user.xp ? user.xp: 0}}
						XP</p>
				</div>
			</div>

		</section>

		<!-- Section Bromances -->
		<section class="mt-20 ">
			<h2 class="text-xl font-semibold">Ses bromances
				<span class="text-sm text-neutral-400">- 118</span>
			</h2>
			<div
				class="flex gap-5 mt-4">
				<!-- Card 1 -->
				<div class="w-35">
					{% include "parts/components/card_col.html.twig" with {"title": "app_register", "height": 25} %}
				</div>
				<div class="w-35">
					{% include "parts/components/card_col.html.twig" with {"title": "app_register", "height": 25} %}
				</div>


			</div>
		</section>


		<!-- Section Events Participation -->
		<section class="mt-20 ">
			<h2 class="text-xl font-semibold">Sa participation aux events
				<span class="text-sm text-neutral-400">-
					{{ user.events|length }}
				</span>
			</h2>
			<div class="flex gap-8 pt-8">
				{% for event in user.events %}
					<a href={{path("app_event_show", {id: event.id} )}} class=" w-60">
						{% include "parts/components/card_col.html.twig" with {"title": event.title, "height": 40} %}
					</a>
				{% else %}
					<p>Aucune participation trouvée.</p>
				{% endfor %}
			</div>
		</section>


		<!-- Section Forum -->
		<section class="mt-20 ">
			<h2 class="text-xl font-semibold">Ses articles
				<span class="text-sm text-neutral-400">-
					{{ user.topics|length }}</span>
			</h2>
			<div class="flex gap-8 pt-8 flex-wrap">
				{% for topic in user.topics %}
					{% include "macro/topic_card.html.twig" with {"title": topic.title, "height": 50} %}
				{% else %}
					<p>Aucun article trouvé.</p>
				{% endfor %}

			</div>
		</section>
	</div>
{% endblock %}
